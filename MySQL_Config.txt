cd C:\Program Files\MySQL\MySQL Server 8.0\bin

mysql -u root -p --port=666
mysql -u everytime -p --port=666

CREATE USER 'youtube'@'%' IDENTIFIED BY '2483';

GRANT ALL PRIVILEGES ON *.* TO 'youtube'@'%' WITH GRANT OPTION;
WITH GRANT OPTION은 root 계정이 다른 사용자에게도 권한을 부여할 수 있도록 허용합니다.

GRANT ALL PRIVILEGES ON *.* TO 'youtube'@'%';

CREATE DATABASE youtubeDATA;

GRANT ALL PRIVILEGES ON youtubeDATA.* TO 'youtube'@'%';

USE youtubeDATA;
CREATE TABLE comments (
    video_id VARCHAR(255) NOT NULL, 
    author VARCHAR(255) NOT NULL, 
    text TEXT NOT NULL, 
    like_count INT NOT NULL, 
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

ALTER TABLE comments
ADD CONSTRAINT unique_video_id UNIQUE (video_id);


CREATE TABLE videoId (
    video_id VARCHAR(255) NOT NULL, 
    publish_time DATETIME NOT NULL
);

ALTER TABLE videoId
ADD CONSTRAINT unique_video_id UNIQUE (video_id);


CREATE TABLE videoData (
    id INT AUTO_INCREMENT PRIMARY KEY,
    video_id VARCHAR(255) NOT NULL,
    title TEXT NOT NULL,
    view_count INT NOT NULL,
    like_count INT NOT NULL,
    comment_count INT NOT NULL,
    publish_time DATETIME NOT NULL,
    is_shorts BOOLEAN NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

ALTER TABLE videoData
ADD CONSTRAINT unique_video_id UNIQUE (video_id, title(255);


SET @new_id = 0;

UPDATE videoid
SET id = (@new_id := @new_id + 1)
ORDER BY id ASC;

ALTER TABLE videoid AUTO_INCREMENT = 1;

FLUSH PRIVILEGES;

TRUNCATE TABLE logs;

GRANT ALL PRIVILEGES ON `ytbCreator$YoutubeDATA1`.* TO 'ytbCreator'@'%';
FLUSH PRIVILEGES;


